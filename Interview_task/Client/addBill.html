<div class="billEntryForm bg-white p-2 rounded-2 h-100" ng-controller="AddBillController">
    <div class="heading bg-primary bg-opacity-25  m-1 p-2 rounded-1" style="color: rgba(5, 78, 195, 0.96);">
        <p class="m-0 p-0 fw-bold">FORM 47-SUPPLEMENTARY BILLS</p>
    </div>
    <div class="col-md-7 ms-3 mt-3 border p-2 bg-secondary bg-opacity-10 rounded-2 fw-semibold"
        style="font-size: 15px;">
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="formTypeRadio" id="formTypeRadio1" value="form47Salary"
                ng-model="selectBillType">
            <label class="form-check-label" for="formTypeRadio1">FORM 47-Salary
                Bills</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="formTypeRadio" id="formTypeRadio2" value="otherBill"
                ng-model="selectBillType">
            <label class="form-check-label" for="formTypeRadio2">Other
                Bills</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="formTypeRadio" id="formTypeRadio3"
                value="form47SupplementaryBills" ng-model="selectBillType">
            <label class="form-check-label" for="formTypeRadio3">Form
                47-Supplementary Bills</label>
        </div>
    </div>
    <div ng-show="selectBillType=='form47SupplementaryBills'">
        <!--  -->
        <div class="d-flex gap-2 ms-2 ps-2 py-3 border-bottom fw-bold">
            <i class="bi bi-file-earmark-fill"></i>
            <p class="p-0 m-0">FORM 47-SUPPLEMENTARY BILLS</p>
        </div>
        <div class="col-6 py-1">
            <div class="d-flex mt-2 fw-bold  ms-2 ps-2 py-1 align-items-center justify-content-between border-top">
                <p class="col-5">Select Bill Type</p>
                <div class="col-7">
                    <select class="form-control"">
                        <option selected disabled value="">Select</option>
                        <option>Increment Arrears</option>
                    </select>
                </div>
            </div>
            <div class=" d-flex mt-2 fw-bold ms-2 ps-2 align-items-center justify-content-between border-top">
                        <p class="col-5">Manual Bill Cut-off date</p>
                        <div class="col-7">
                            <p class="p-0 m-0 fw-semibold">01-11-2018</p>
                        </div>
                </div>
                <div class="d-flex mt-2 fw-bold  ms-2 ps-2 align-items-center justify-content-between border-top">
                    <p class="col-5">Form No</p>
                    <div class="col-7">
                        <p class="p-0 m-0 fw-semibold">47</p>
                    </div>
                </div>
                <div class="d-flex mt-2 fw-bold  ms-2 ps-2 align-items-center justify-content-between border-top">
                    <p class="col-5">Emp Search Filter Type</p>
                    <div class="col-7  rounded-2">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="filterTypeRadio" id="filterTypeRadio1"
                                value="" checked>
                            <label class="form-check-label" for="filterTypeRadio2">Bill ID</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="filterTypeRadio" id="filterTypeRadio2"
                                checked>
                            <label class="form-check-label" for="filterTypeRadio2">EMPCODE</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="filterTypeRadio" id="filterTypeRadio2">
                            <label class="form-check-label" for="filterTypeRadio2">Bank Ac No.</label>
                        </div>
                    </div>
                </div>
                <div class="d-flex mt-2 fw-bold  ms-2 ps-2 align-items-center justify-content-between border-top">
                    <p class="col-5">Enter Employee Code</p>
                    <div class="col-7 d-flex py-1">
                        <input type="text" class="form-control" name="agencyName" required ng-model="employeeCode">
                        <a class="btn px-4 text-white" style="background-color: #1b354d;"
                            ng-click="searchEmployee()">Search</a>
                    </div>
                </div>
            </div>
            <div ng-show="found">
                <div class="col-6 py-1">
                    <div class="d-flex mt-2 fw-bold  ms-2 ps-2 align-items-center justify-content-between border-top">
                        <p class="col-5">Employee</p>
                        <div class="col-7">
                            <p class="p-0 m-0 fw-semibold">{{employeeDetails.name}}</p>
                        </div>
                        <!-- {{employeeDetails}} -->
                    </div>
                    <div class="d-flex mt-2 fw-bold  ms-2 ps-2 align-items-center justify-content-between border-top">
                        <p class="col-5">Employee Remarks</p>
                        <div class="col-7 py-1">
                            <input type="text" class="form-control" placeholder="Enter Remark For Employee">
                        </div>
                    </div>
                    <div class="d-flex mt-2 fw-bold  ms-2 ps-2 align-items-center justify-content-between border-top">
                        <p class="col-5">Select Dates</p>
                        <div class="col-7 py-1 d-flex gap-2">
                            <input type="date" class="form-control" ng-model="fromDate">
                            <input type="date" class="form-control" ng-model="toDate">
                        </div>
                    </div>
                    <div class="d-flex mt-2 fw-bold  ms-2 ps-2 align-items-center justify-content-between border-top">
                        <p class="col-5">Add Type</p>
                        <div class="col-7  rounded-2">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="TypeRadio" id="TypeRadio1"
                                    ng-model="typeSelect" value="1" ng-change="getTypes()">
                                <label class="form-check-label" for="TypeRadio1">Earnings</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="TypeRadio" id="TypeRadio2"
                                    ng-model="typeSelect" value="2" ng-change="getTypes()">
                                <label class="form-check-label" for="TypeRadio2">Deductions</label>
                            </div>
                        </div>
                    </div>
                    <div ng-show="forms">
                        <div
                            class="d-flex mt-2 fw-bold  ms-2 ps-2 py-1 align-items-center justify-content-between border-top">
                            <p class="col-5">Select Type</p>
                            <div class="col-7 py-1">
                                <select class="form-control" ng-model="typeFormSelect"
                                    ng-options="item.name as item.name for item in details">
                                    <option value="">-- Select an item --</option>
                                </select>
                            </div>
                        </div>
                        <!-- {{typeFormSelect}} -->
                        <div
                            class="d-flex mt-2 fw-bold  ms-2 ps-2 align-items-center justify-content-between border-top">
                            <p class="col-5">Date Description</p>
                            <div class="col-7 py-1">
                                <textarea type="text" class="form-control" placeholder="-"></textarea>
                            </div>
                        </div>
                        <div
                            class="d-flex mt-2 fw-bold  ms-2 ps-2 align-items-center justify-content-between border-top">
                            <p class="col-5 py-1">Enter Amount</p>
                            <div class="col-7 d-flex gap-2">
                                <input type="number" class="form-control" name="agencyName" required
                                    ng-model="amountInput">
                                <a class="btn px-4 text-white bg-success" ng-click="addBill($index)">Add</a>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- {{typesBill}} -->
                <div ng-show="typesBill.length>0">
                    <table class="table table-bordered">
                        <thead class="bg-primary bg-opacity-10" style="color: rgba(5, 78, 195, 0.96);">
                            <tr>
                                <th colspan="3"></th>
                                <th colspan="{{displayEarnings.length+displayDeductions.length}}">Due Particulars</th>
                                <th colspan="{{displayEarnings.length+displayDeductions.length}}">Drawn Particulars</th>
                                <th colspan="{{displayEarnings.length+displayDeductions.length}}">Difference</th>
                                <th colspan="3"></th>
                            </tr>
                            <tr>
                                <th>From</th>
                                <th>To</th>
                                <th>Desc</th>
                                <th colspan="{{displayEarnings.length}}" ng-show="displayEarnings.length>0">
                                    Earnings<span class="p-0 m-0 fw-12">(in Rs.)</span></th>
                                <th colspan="{{displayDeductions.length}}" ng-show="displayDeductions.length>0">
                                    Deductions<span class="p-0 m-0 fw-12">(in Rs.)</th>
                                <th colspan="{{displayEarnings.length}}" ng-show="displayEarnings.length>0">
                                    Earnings<span class="p-0 m-0 fw-12">(in Rs.)</th>
                                <th colspan="{{displayDeductions.length}}" ng-show="displayDeductions.length>0">
                                    Deductions<span class="p-0 m-0 fw-12">(in Rs.)</th>
                                <th colspan="{{displayEarnings.length}}" ng-show="displayEarnings.length>0">
                                    Earnings<span class="p-0 m-0 fw-12">(in Rs.)</th>
                                <th colspan="{{displayDeductions.length}}" ng-show="displayDeductions.length>0">
                                    Deductions<span class="p-0 m-0 fw-12">(in Rs.)</th>
                                <th>Total Gross<span class="p-0 m-0 fw-12">(in Rs.)</th>
                                <th>Total Deductions<span class="p-0 m-0 fw-12">(in Rs.)</th>
                                <th>Net<span class="p-0 m-0 fw-12">(in Rs.)</th>
                            </tr>
                        </thead>
                        {{displayEarnings}}
                        <tbody>
                            <tr class="fw-semibold">
                                <td></td>
                                <td></td>
                                <td></td>
                                <td ng-repeat="earning in displayEarnings track by $index">
                                    {{earning.typeForm}}</td>
                                <td ng-repeat="deduction in displayDeductions track by $index">
                                    {{deduction.typeForm}}</td>
                                <td ng-repeat="earning in displayEarnings track by $index">
                                    {{earning.typeForm}}</td>
                                <td ng-repeat="deduction in displayDeductions track by $index">
                                    {{deduction.typeForm}}</td>
                                <td ng-repeat="earning in displayEarnings track by $index">
                                    {{earning.typeForm}}</td>
                                <td ng-repeat="deduction in displayDeductions track by $index">
                                    {{deduction.typeForm}}</td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr class="fw-semibold" ng-repeat="typesBill in typesBill track by $index">
                                <td>{{typesBill.fromDate | date:'dd-MM-yyyy'}}</td>
                                <td>{{typesBill.toDate | date:'dd-MM-yyyy'}}</td>
                                <td></td>
                                <td ng-repeat="earning in displayEarnings">
                                    {{getEarning(typesBill.earnings, earning.typeForm)}}
                                </td>
                                <td ng-repeat="deduction in displayDeductions">
                                    {{getDeduction(typesBill.deductions, deduction.typeForm)}}</td>
                                <td ng-repeat="earning in displayEarnings">{{getEarning(typesBill.earnings,
                                    earning.typeForm)}}</td>
                                <td ng-repeat="deduction in displayDeductions">{{getDeduction(typesBill.deductions,
                                    deduction.typeForm)}}</td>
                                <td ng-repeat="earning in displayEarnings"> {{getEarning(typesBill.earnings,
                                    earning.typeForm)}}
                                </td>
                                <td ng-repeat="deduction in displayDeductions">
                                    {{getDeduction(typesBill.deductions, deduction.typeForm)}}</td>
                                <td>{{typesBill.earnings | sumOfValue :'amount'}}</td>
                                <td>{{typesBill.deductions | sumOfValue :'amount'}}</td>
                                <td>{{(typesBill.earnings | sumOfValue :'amount')-(typesBill.deductions | sumOfValue
                                    :'amount')}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="d-flex gap-3 justify-content-between">
                        <table class="table table-bordered">
                            <thead>
                                <tr class="bg-primary bg-opacity-10 text-primary">
                                    <td>Earnings</td>
                                    <td>Net Amount</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="(key,value) in earningSum">
                                    <td>{{key}}</td>
                                    <td>{{value}}</td>
                                </tr>
                            </tbody>
                        </table>
                        <table class="table table-bordered">
                            <thead>
                                <tr class="bg-primary bg-opacity-10 text-primary">
                                    <td>Deductions</td>
                                    <td>Net Amount</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="(key,value) in deductionSum">
                                    <td>{{key}}</td>
                                    <td>{{value}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="d-flex justify-content-center">
                        <a class="btn btn-secondary" ng-click="submitBill()">Submit Bill</a>
                    </div>
                </div>
            </div>
        </div>
    </div>